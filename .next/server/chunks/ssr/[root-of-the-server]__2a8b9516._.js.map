{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nabil/OneDrive/Bureau/projet%20epsizone%20-%20Copie/projet-nabil-et-pedro-open-innov/src/lib/supabaseClient.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = 'https://fbbsameldccmlnxpugpn.supabase.co';\r\nconst supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZiYnNhbWVsZGNjbWxueHB1Z3BuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg5NDMyMTMsImV4cCI6MjA2NDUxOTIxM30.OLz7Xl3U41VA-jVXDwLDVOV0qG5ivwFcIF_uuCnL5M4';\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,cAAc;AACpB,MAAM,kBAAkB;AAEjB,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAa","debugId":null}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nabil/OneDrive/Bureau/projet%20epsizone%20-%20Copie/projet-nabil-et-pedro-open-innov/src/app/register/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { supabase } from '@/lib/supabaseClient';\r\n\r\nexport default function RegisterPage() {\r\n  const router = useRouter();\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n    confirmPassword: ''\r\n  });\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    // Vérifier que les mots de passe correspondent\r\n    if (formData.password !== formData.confirmPassword) {\r\n      setError('Les mots de passe ne correspondent pas');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // Vérifier la longueur du mot de passe\r\n    if (formData.password.length < 6) {\r\n      setError('Le mot de passe doit contenir au moins 6 caractères');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      console.log('Début de l\\'inscription...');\r\n      \r\n      // Créer l'utilisateur dans Supabase Auth\r\n      const { data: authData, error: authError } = await supabase.auth.signUp({\r\n        email: formData.email,\r\n        password: formData.password,\r\n        options: {\r\n          data: {\r\n            name: formData.name,\r\n          }\r\n        }\r\n      });\r\n\r\n      if (authError) {\r\n        console.error('Erreur Auth:', authError);\r\n        throw new Error(authError.message);\r\n      }\r\n\r\n      if (!authData?.user) {\r\n        throw new Error('Aucun utilisateur créé');\r\n      }\r\n\r\n      console.log('Utilisateur Auth créé:', authData.user);\r\n\r\n      // Créer l'utilisateur dans la table users\r\n      const { error: userError } = await supabase\r\n        .from('users')\r\n        .insert([\r\n          {\r\n            id: authData.user.id,\r\n            name: formData.name,\r\n            email: formData.email,\r\n            role: 'user',\r\n            created_at: new Date().toISOString()\r\n          }\r\n        ]);\r\n\r\n      if (userError) {\r\n        console.error('Erreur DB:', userError);\r\n        throw new Error(userError.message);\r\n      }\r\n\r\n      console.log('Inscription réussie!');\r\n      \r\n      // Rediriger vers la page de connexion\r\n      router.push('/login?message=Inscription réussie! Vous pouvez maintenant vous connecter.');\r\n    } catch (error) {\r\n      console.error('Erreur détaillée:', error);\r\n      setError(error.message || 'Erreur lors de l\\'inscription. Veuillez réessayer.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-900 flex items-center justify-center\">\r\n      <div className=\"bg-[#121826] p-8 rounded-2xl shadow-xl w-full max-w-md\">\r\n        <h1 className=\"text-2xl font-bold text-white text-center mb-8\">Inscription</h1>\r\n        \r\n        {error && (\r\n          <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n          <div>\r\n            <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n              Nom complet\r\n            </label>\r\n            <input\r\n              id=\"name\"\r\n              name=\"name\"\r\n              type=\"text\"\r\n              value={formData.name}\r\n              onChange={handleChange}\r\n              className=\"w-full p-3 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-blue-500 focus:outline-none\"\r\n              required\r\n              minLength={2}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n              Email\r\n            </label>\r\n            <input\r\n              id=\"email\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              value={formData.email}\r\n              onChange={handleChange}\r\n              className=\"w-full p-3 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-blue-500 focus:outline-none\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n              Mot de passe\r\n            </label>\r\n            <input\r\n              id=\"password\"\r\n              name=\"password\"\r\n              type=\"password\"\r\n              value={formData.password}\r\n              onChange={handleChange}\r\n              className=\"w-full p-3 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-blue-500 focus:outline-none\"\r\n              required\r\n              minLength={6}\r\n            />\r\n            <p className=\"text-sm text-gray-400 mt-1\">Le mot de passe doit contenir au moins 6 caractères</p>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"confirmPassword\" className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n              Confirmer le mot de passe\r\n            </label>\r\n            <input\r\n              id=\"confirmPassword\"\r\n              name=\"confirmPassword\"\r\n              type=\"password\"\r\n              value={formData.confirmPassword}\r\n              onChange={handleChange}\r\n              className=\"w-full p-3 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-blue-500 focus:outline-none\"\r\n              required\r\n              minLength={6}\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition duration-200 disabled:opacity-50\"\r\n          >\r\n            {loading ? 'Inscription en cours...' : 'S\\'inscrire'}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"mt-6 text-center\">\r\n          <p className=\"text-gray-400\">\r\n            Déjà un compte ?{' '}\r\n            <a href=\"/login\" className=\"text-blue-400 hover:underline\">\r\n              Se connecter\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}